@model IEnumerable<J.Entities.Parent>

@{
    ViewBag.Title = "Index";
}

<script type="text/javascript">
    $(function () {

        $("#Parent-search").jsearch({ //查询部分
            items: [
					{ Name: "小数和整数", Id: "txt_double", Type: "double" },
					{ Name: "范围小数和整数", Id: "txt_doubleStart", Type: "doubleRange", Brother: [{ Id: "txt_doubleEnd" }] },
					{ Name: "两位整数", Id: "txt_int", Type: "int", MaxLength: 2 },
					{ Name: "范围整数", Id: "txt_intStart", Type: "intRange", MaxLength: 3, Brother: [{ Id: "txt_intEnd", MaxLength: 4 }] },
					{ Name: "单个日期", Id: "txt_Time", Type: "date" },
					{ Name: "两个日期", Id: "date_StartTime", Type: "dateRange", Brother: [{ Id: "date_EndTime" }] },
                    { Name: "单选按钮", Id: "btn-radio", name: "radio-hobby", Type: "radio", Value: [{ value: "羽毛球", text: "羽毛球" }, { value: "篮球", text: "篮球", selected: true }, { value: "乒乓球", text: "乒乓球" }] },
                     { Name: "多选按钮", Id: "btn-checkbox", name: "checkbox-hobby", Type: "checkbox", Value: [{ value: "羽毛球", text: "羽毛球", selected: true }, { value: "篮球", text: "篮球", selected: true }, { value: "乒乓球", text: "乒乓球" }] },
                    { Name: "自定义", Type: "custom", Content: "<input  id='txt_content1' name='text' type='text' >" },
					{ Name: "自定义2", Type: "custom", Content: "<input  id='txt_content2' name='text' type='text' >" },
					{ Name: "字符串", Id: "txt_Name", Type: "string", MaxLength: 5 },
                    { Name: "单选", Id: "txt_State1", Type: "selectSingle", Value: [{ value: 0, text: "全部" }, { value: 1, text: "正常" }, { value: 2, text: "停用", selected: true }] },
					{ Name: "多选", Id: "txt_State", Type: "selectMultiple", Value: [{ value: 0, text: "全部" }, { value: 1, text: "正常" }, { value: 2, text: "停用" }] }
            ]
        });
  
        RefreshTable(1, 'true');//内容部分

        function ShowPager(count) { //分页部分
            $("#Parent-pager").jdatapager({
                recordCount: count,
                pageSize: 5,
                pageIndex: 1,
                onPageChange: function (pageindex, pagesize) {
                    RefreshTable(pageindex, 'false');
                }
            });
        }

        function RefreshTable(pageindex, flag) { //翻页和主体部分
            $.ajax({
                type: "Json",
                cache: false,
                url: "@Url.Action("IndexList", "Parent")",
                data: {
                    PageSize: 5,
                    PageIndex: pageindex
                },
                success: function (data) {
                    count = data.Count;
                    if (flag == 'true') {
                        ShowPager(count); //返回总页数
                    }
                    $("#Parent-content").jtable({
                        tableHeight: '30%', //表高
                        tableWidth: '100%', //表宽
                        data:data.Source,
                          //数据源
                        columns:
                            [
                                { head: "名称1", context: "#Name(#Name2)(#ID)",maxLength：5, head_align:"left", v_align: "top", h_align: "left", height: "auto", width:"auto"},
                                { head: "名称2", context: "#Name2", maxLength: 5, head_align: "left", v_align: "top", h_align: "left", height: "auto", width: "auto" },
                                { head: "名称3", context: "#Name3", maxLength: 5, head_align: "left", v_align: "top", h_align: "left", height: "auto", width: "auto" },
                                { head: "名称4", context: "#Name4", maxLength: 5, head_align: "left", v_align: "top", h_align: "left", height: "auto", width: "auto" },
                                { head: "名称5", context: "#Name5", maxLength: 5, head_align: "left", v_align: "top", h_align: "left", height: "auto", width: "auto" },
                                { head: "操作",context: "&lt;a href='#' onclick=ActionEdit(#ID,'#Name','#Name2')&gt;Edit&lt;/a&gt;|&lt;a href='#' onclick=ActionDetail(#ID,'#Name','#Name2')&gt;Detail&lt;/a&gt;|&lt;a href='#' onclick=ActionDelete(#ID,'#Name','#Name2')&gt;Delete&lt;/a&gt;",
                                    maxLength: 5,head_align: "left",v_align: "top",h_align: "left",height: "auto",width: "auto"}
                            ],//列名
                        sortItem: { sortColumn: "#Name5", sortType: "asc" } ,
                        onSortChange: function (sortColumn, head, sortType) {
                                 alert(sortColumn + "\n" + head + "\n" + sortType);
                            }
                        });
                    

                }
                });
        }


            
    });
</script>
<h2>Index</h2>


<div id="Parent-search">

</div>
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<div id="Parent-content">
</div>
<div id="Parent-pager"></div>
